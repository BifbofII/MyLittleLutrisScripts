files:
- patch107: http://heretics-hexens.ucoz.com/ht2_ep_v1-07.7z
- script1: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/script.bat
- script2: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/soundtrack.sh
- zpbin: https://freefr.dl.sourceforge.net/project/gnuwin32/zip/3.0/zip-3.0-bin.zip
- zpdep: https://freefr.dl.sourceforge.net/project/gnuwin32/zip/3.0/zip-3.0-dep.zip
- uzpbin: https://freefr.dl.sourceforge.net/project/gnuwin32/unzip/5.51-1/unzip-5.51-1-bin.zip
- menu1: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/HERETICM1.BAT
- menu2: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/HERETICM2.BAT
- audiodll: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/winmm.dll
game:
  exe: drive_c/Program Files/Heretic II/HERETICM1.BAT
  prefix: $GAMEDIR
installer:
- task:
    arch: win64
    name: create_prefix
    prefix: $GAMEDIR
- insert-disc:
    requires: h2_setup.exe
- task:
    description: Running setup of the game. Just proceed and keep all settings at
      their defaults
    executable: $DISC/h2_setup.exe
    name: wineexec
    prefix: $GAMEDIR
- merge:
    dst: $GAMEDIR/drive_c/tmp/patch/
    src: patch107
- extract:
    dst: $GAMEDIR/drive_c/tmp/patch/
    src: $GAMEDIR/drive_c/tmp/patch/ht2_ep_v1-07.7z
- extract:
    dst: $CACHE
    file: zpbin
- extract:
    dst: $CACHE
    file: zpdep
- extract:
    dst: $CACHE
    file: uzpbin
- merge:
    dst: $GAMEDIR/drive_c/tmp/bin
    src: $CACHE/bin/
- move:
    dst: $GAMEDIR/drive_c/tmp/
    src: script1
- move:
    dst: $GAMEDIR/drive_c/tmp/
    src: script2
- task:
    args: c:\\tmp\\script.bat
    description: Working to make this game more Linux Wine friendly
    executable: $GAMEDIR/drive_c/windows/syswow64/wineconsole.exe
    name: wineexec
    prefix: $GAMEDIR
- copy:
    dst: $GAMEDIR/drive_c/Program Files/Heretic II/
    src: menu1
- copy:
    dst: $GAMEDIR/drive_c/Program Files/Heretic II/
    src: menu2
- copy:
    dst: $GAMEDIR/drive_c/Program Files/Heretic II/
    src: audiodll
- task:
    arch: win64
    key: winmm
    name: set_regedit
    path: HKEY_CURRENT_USER\Software\Wine\DllOverrides\
    prefix: $GAMEDIR
    type: REG_SZ
    value: native,builtin
system:
  env:
    MESA_EXTENSION_MAX_YEAR: 2003
    __GL_ExtensionStringVersion: 17700

