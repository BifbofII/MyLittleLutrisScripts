files:
- patch107: http://heretics-hexens.ucoz.com/ht2_ep_v1-07.7z
- fg: https://ffmpeg.zeranoe.com/builds/win64/static/ffmpeg-20190508-06ba478-win64-static.zip
- script: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/script.bat
- cdrt: https://freefr.dl.sourceforge.net/project/cdrtoolswin/1.0/Binaries/CDR-Tools.exe
- zpbin: https://freefr.dl.sourceforge.net/project/gnuwin32/zip/3.0/zip-3.0-bin.zip
- zpdep: https://freefr.dl.sourceforge.net/project/gnuwin32/zip/3.0/zip-3.0-dep.zip
- uzpbin: https://freefr.dl.sourceforge.net/project/gnuwin32/unzip/5.51-1/unzip-5.51-1-bin.zip
game:
  exe: drive_c/Program Files (x86)/Heretic II/Heretic2.exe
  prefix: $GAMEDIR
installer:
- task:
    arch: win64
    name: create_prefix
    prefix: $GAMEDIR
- insert-disc:
    requires: h2_setup.exe
- task:
    description: Running setup of the game. Just proceed and keep all settings at
      their defaults
    executable: $DISC/h2_setup.exe
    name: wineexec
    prefix: $GAMEDIR
- merge:
    dst: $GAMEDIR/drive_c/tmp/patch/
    src: patch107
- extract:
    dst: $GAMEDIR/drive_c/tmp/patch/
    src: $GAMEDIR/drive_c/tmp/patch/ht2_ep_v1-07.7z
- extract:
    dst: $CACHE
    file: zpbin
- extract:
    dst: $CACHE
    file: zpdep
- extract:
    dst: $CACHE
    file: uzpbin
- extract:
    dst: $CACHE
    src: fg
- extract:
    dst: $CACHE/bin
    format: Nsis
    src: cdrt
- merge:
    dst: $GAMEDIR/drive_c/tmp/bin
    src: $CACHE/bin/
- move:
    dst: $GAMEDIR/drive_c/tmp/
    src: script
- task:
    args: c:\\tmp\\script.bat
    description: Working to make this game more Linux Wine friendly
    executable: $GAMEDIR/drive_c/windows/syswow64/wineconsole.exe
    name: wineexec
    prefix: $GAMEDIR
system:
  env:
    MESA_EXTENSION_MAX_YEAR: 2003
    __GL_ExtensionStringVersion: 17700
