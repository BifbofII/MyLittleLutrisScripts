files:
- patch107: http://heretics-hexens.ucoz.com/ht2_ep_v1-07.7z
- script1: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/lowercase.bat
- script2: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/soundtrack.bat
- zpbin: https://freefr.dl.sourceforge.net/project/gnuwin32/zip/3.0/zip-3.0-bin.zip
- zpdep: https://freefr.dl.sourceforge.net/project/gnuwin32/zip/3.0/zip-3.0-dep.zip
- uzpbin: https://freefr.dl.sourceforge.net/project/gnuwin32/unzip/5.51-1/unzip-5.51-1-bin.zip
- menu1: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/HERETICM1.BAT
- menu2: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/HERETICM2.BAT
- audiodll: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/winmm.dll
- mp: https://freefr.dl.sourceforge.net/project/mplayer-win32/MPlayer%20and%20MEncoder/r38135%2Bgb272d5b9b6/MPlayer-generic-r38135%2Bgb272d5b9b6.7z
- grepbin: http://downloads.sourceforge.net/gnuwin32/grep-2.5.4-bin.zip
- grepdep: http://downloads.sourceforge.net/gnuwin32/grep-2.5.4-dep.zip
- wpp: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/Heretic%20II/heretic2.bmp
- thfmod: http://www.amwilliams.com/hereticii/thf_5.zip
game:
  exe: drive_c/Program Files (x86)/Heretic II/HERETICM1.BAT
  prefix: $GAMEDIR
installer:
- task:
    arch: win64
    name: create_prefix
    prefix: $GAMEDIR
- insert-disc:
    requires: h2_setup.exe
- task:
    description: Running setup of the game. Just proceed and keep all settings at
      their defaults
    executable: $DISC/h2_setup.exe
    name: wineexec
    prefix: $GAMEDIR
- merge:
    dst: $GAMEDIR/drive_c/tmp/patch/
    src: patch107
- merge:
    dst: $GAMEDIR/drive_c/tmp/thf5
    src: thfmod
- extract:
    dst: $GAMEDIR/drive_c/tmp/patch/
    src: $GAMEDIR/drive_c/tmp/patch/ht2_ep_v1-07.7z
- extract:
    dst: $CACHE
    file: zpbin
- extract:
    dst: $CACHE
    file: zpdep
- extract:
    dst: $CACHE
    file: uzpbin
- extract:
    dst: $CACHE
    file: grepbin
- extract:
    dst: $CACHE
    file: grepdep
- merge:
    dst: $GAMEDIR/drive_c/tmp/bin
    src: $CACHE/bin/
- move:
    dst: $GAMEDIR/drive_c/tmp/
    src: script1
- move:
    dst: $GAMEDIR/drive_c/tmp/
    src: script2
- merge:
    dst: $GAMEDIR/drive_c/tmp/mplayer
    src: mp
- extract:
    dst: $GAMEDIR/drive_c/tmp/mplayer/
    file: $GAMEDIR/drive_c/tmp/mplayer/MPlayer-generic-r38135%2Bgb272d5b9b6.7z
- task:
    args: c:\\tmp\\lowercase.bat
    description: Working to make this game more Linux Wine friendly
    executable: $GAMEDIR/drive_c/windows/syswow64/wineconsole.exe
    name: wineexec
    prefix: $GAMEDIR
- task:
    args: c:\\tmp\\soundtrack.bat
    description: Working to make this game more Linux Wine friendly
    executable: $GAMEDIR/drive_c/windows/syswow64/wineconsole.exe
    name: wineexec
    prefix: $GAMEDIR
- copy:
    dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/
    src: menu1
- copy:
    dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/
    src: menu2
- move:
    dst: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/
    src: audiodll
- move:
    dst: $GAMEDIR/drive_c/
    src: wpp
- task:
    arch: win64
    key: winmm
    name: set_regedit
    path: HKEY_CURRENT_USER\Software\Wine\DllOverrides\
    prefix: $GAMEDIR
    type: REG_SZ
    value: native,builtin
- task:
    arch: win64
    key: wallpaper
    name: set_regedit
    path: HKEY_CURRENT_USER\Control Panel\Desktop\
    prefix: $GAMEDIR
    type: REG_SZ
    value: c:\\heretic2.bmp
- task:
    arch: win64
    key: background
    name: set_regedit
    path: HKEY_CURRENT_USER\Control Panel\Colors\
    prefix: $GAMEDIR
    type: REG_SZ
    value: 0 0 0
- task:
    arch: win64
    key: ActiveTitle
    name: set_regedit
    path: HKEY_CURRENT_USER\Control Panel\Colors\
    prefix: $GAMEDIR
    type: REG_SZ
    value: 0 0 0
- task:
    arch: win64
    key: GradientActiveTitle
    name: set_regedit
    path: HKEY_CURRENT_USER\Control Panel\Colors\
    prefix: $GAMEDIR
    type: REG_SZ
    value: 204 153 255
- task:
    description: Enter your resolution into the Width and Height fields and press
      OK.
    executable: $GAMEDIR/drive_c/Program Files (x86)/Heretic II/h2resolution.exe
    name: wineexec
    prefix: $GAMEDIR
system:
  env:
    MESA_EXTENSION_MAX_YEAR: 2003
    __GL_ExtensionStringVersion: 17700
wine:
  Desktop: true

